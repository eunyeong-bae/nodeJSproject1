<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="/main.css" rel="stylesheet"/>
</head>
<body class="grey-bg">
    <!-- %- : include 문법 사용할 때 or 사용하면 html 이 렌더링되어 나옴 -->
    <%- include('nav.ejs') %>
    <!-- <%= JSON.stringify(posts) %> -->

    <!-- 1.form 태그로 요청하기 -->
    <!-- <form class="search-bg" action="/search" method="POST">
        <input class="search" type="text" placeholder="검색어 입력" name="search"/>
        <button class="search-send" type="submit">검색</button>
    </form> -->

    <!-- 2.script 로 요청하기 -->
    <script>
        document.querySelector('.search-send').addEventListener('click', function(){
            let search = document.querySelector('.search').value;
            location.href = '/search?val='+search;
        })
    </script>    

    <h4>검색 결과</h4>
    <div class="white-bg">
        <!-- % : html 사이에 js 문법 쓸 때 -->
        <% for(let i=0; i<posts.length; i++){ %>
            <div class="list-box">
                <!-- %= : 사용하면 html 이 문자처럼 나옴 -->
                <h4>
                    <a href="/detail/<%= posts[i]._id %>">
                        <%= posts[i].title %>
                    </a> 
                    <a href="/edit/<%= posts[i]._id %>">✏️</a>
                    <span class="delete" data-id="<%= posts[i]._id %>">🗑️</span>
                </h4>
                <p><%= posts[i].content %></p>
            </div>

        <% } %>
    </div>
</body>
</html>